"use strict";{let contentChangePassword='\n<webui-input-text theme="secondary" name="old_password" type="password" label="Old Password" autofocus></webui-input-text>\n<webui-input-text theme="primary" name="new_password" type="password" label="New Password"></webui-input-text>\n<webui-input-text theme="primary" name="confirm_password" type="password" label="Confirm Password"></webui-input-text>\n<webui-alert severity="danger"></webui-alert>\n';webui.define("app-account-sidebar",{content:!0,watchVisibility:!1,isInput:!1,preload:"flex button",constructor:t=>{t._btnUpdatePassword=t.template.querySelector('[name="passwordupdate"]'),t._btnSignout=t.template.querySelector('[name="signout"]'),t._btnUpdatePassword.addEventListener("click",(_=>{webui.dialog({title:"Change Password",minWidth:"80%",content:contentChangePassword,confirm:"Request Password Reset Email",cancel:"Cancel",onconfirm:async(data,content)=>{const jsonData=Object.fromEntries(data);let alert=content.querySelector("webui-alert");if(!jsonData.old_password)return alert.setValue("Please enter your old password"),!1;if(!jsonData.new_password)return alert.setValue("Please enter a new password"),!1;if(jsonData.new_password.trim().length<20)return alert.setValue("Passwords must be at least 20 characters in length"),!1;if(jsonData.new_password!==jsonData.confirm_password)return alert.setValue("Confirm and New passwords do not match"),!1;let result=await webui.fetchApi("user/password",jsonData,"PATCH");if(200===result.status)return webui.alert("Your password has been updated.","success"),!0;let message=await result.text();return alert.setValue(message||"An unexpected error happened. Please wait a moment and try again."),!1}})})),t._btnSignout.addEventListener("click",(async _=>{await webui.fetchApi("user/signout"),await webui.loadRoles(),webui.closeSharedDrawer(),webui.alert("You have been signed out.","success")}))},flags:[],attr:["height","max-height"],attrChanged:(t,property,value)=>{switch(property){case"height":t.style.height=webui.pxIfNumber(value);break;case"maxHeight":t.style.maxHeight=webui.pxIfNumber(value)}},connected:function(t){t.setupComponent()},disconnected:function(t){},reconnected:function(t){},setupComponent:function(){},shadowTemplate:'\n<webui-flex grow></webui-flex>\n<webui-button name="passwordupdate" theme="warning">Change Password</webui-button>\n<webui-button name="signout" theme="danger">Sign-Out</webui-button>\n<style type="text/css">\n:host {\ndisplay:flex;\nflex-direction:column;\ngap:var(--padding);\nheight:100%;\noverflow: auto;\n}\n</style>\n'})}