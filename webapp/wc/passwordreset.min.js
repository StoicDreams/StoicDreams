"use strict";{let content='\n<form id="passwordreset">\n<webui-input-text theme="primary" name="password" type="password" label="Password"></webui-input-text>\n<webui-input-text theme="primary" name="confirmPassword" type="password" label="Confirm Password"></webui-input-text>\n<webui-flex justify="end" align="center" class="pa-3">\n    <webui-button type="submit" theme="primary" start-icon="confirm">Reset Password</webui-button>\n</webui-flex>\n<webui-alert severity="danger"></webui-alert>\n</form>\n';webui.define("app-passwordreset",{content:!0,watchVisibility:!1,isInput:!1,preload:"",constructor:t=>{},flags:[],attr:["height","max-height"],attrChanged:(t,property,value)=>{switch(property){case"height":t.style.height=webui.pxIfNumber(value);break;case"maxHeight":t.style.maxHeight=webui.pxIfNumber(value)}},connected:function(t){t.setupComponent()},disconnected:function(t){},reconnected:function(t){},setupComponent:function(){const t=this;t.innerHTML=content;let form=t.querySelector("#passwordreset"),alert=t.querySelector("webui-alert");form.addEventListener("submit",(ev=>{ev.stopPropagation(),ev.preventDefault(),alert.setValue();const formData=new FormData(form),jsonData=Object.fromEntries(formData);jsonData.token=location.pathname.split("/").pop();try{webui.fromBase64(jsonData.token)}catch{return void alert.setValue("Invalid token")}if(!jsonData.token)return void alert.setValue("Missing expected token");if(!jsonData.password)return void alert.setValue("Password is required");if(!jsonData.confirmPassword)return void alert.setValue("Please confirm your password");if(jsonData.password!==jsonData.confirmPassword)return void alert.setValue("Password and Confirm Password do not match");let resp;return webui.fetchApi("user/confirm/passwordreset",jsonData).then((r=>(resp=r,resp.text()))).then((text=>{200===resp.status?(webui.alert(text||"Password was successfully reset. You may now sign-in with your email and password.","success"),webui.navigateTo("/signin")):alert.setValue(text||"Failed to finish update password. Please wait a moment and try again.")})).catch((ex=>{alert.setValue(`Error: ${ex}`)})),!1}))}})}